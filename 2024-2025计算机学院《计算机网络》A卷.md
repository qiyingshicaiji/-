# 2024-2025学年第一学期《计算机网络》期末考试试卷（A卷）
## 计算机学院

**考试时间：120分钟  满分：100分  考试形式：开卷**

---

## 一、选择题（每题2分，共30分）

1. 在OSI参考模型中，保证端到端可靠性的层次是（）
   - A. 数据链路层
   - B. 网络层
   - C. 传输层
   - D. 会话层

2. 某信道的带宽为4kHz，信噪比为30dB，则该信道的最大数据传输速率约为（）
   - A. 12 kb/s
   - B. 24 kb/s
   - C. 40 kb/s
   - D. 120 kb/s

3. 在采用CSMA/CD协议的以太网中，如果发生冲突，则（）
   - A. 立即重发数据帧
   - B. 先停止发送，等待一段随机时间后再重发
   - C. 发送拥塞信号，然后立即重发
   - D. 丢弃该帧，不再重发

4. 一个IP数据报的总长度为3000字节，数据部分为2980字节。若需要分片且每个分片最多携带1400字节的数据，则第二个分片的片偏移字段值应为（）
   - A. 175
   - B. 1400
   - C. 185
   - D. 350

5. 在TCP拥塞控制中，当发送方收到3个冗余ACK时，采用的策略是（）
   - A. 慢开始算法，将cwnd设置为1
   - B. 快重传和快恢复，将ssthresh设置为cwnd的一半，cwnd设置为ssthresh
   - C. 拥塞避免算法，cwnd线性增长
   - D. 立即关闭连接

6. 关于距离-向量路由算法和链路状态路由算法，以下说法正确的是（）
   - A. RIP协议采用链路状态路由算法
   - B. OSPF协议采用距离-向量路由算法
   - C. 距离-向量算法容易产生路由环路
   - D. 链路状态算法不使用Dijkstra算法

7. 某主机的IP地址为192.168.5.128，子网掩码为255.255.255.192，则该主机所在子网的网络地址是（）
   - A. 192.168.5.0
   - B. 192.168.5.64
   - C. 192.168.5.128
   - D. 192.168.5.192

8. 在滑动窗口协议中，若采用n比特对帧编号，要使接收方能够正确接收所有帧，采用选择重传协议（SR）时，发送窗口的最大尺寸应为（）
   - A. 2^n
   - B. 2^n - 1
   - C. 2^(n-1)
   - D. 2^(n-1) - 1

9. 关于ARP协议，以下说法错误的是（）
   - A. ARP将IP地址解析为MAC地址
   - B. ARP请求报文采用广播方式发送
   - C. ARP响应报文采用单播方式发送
   - D. ARP协议工作在网络层

10. TCP建立连接时采用三次握手，其主要原因是（）
    - A. 为了确认双方的接收和发送能力
    - B. 为了实现全双工通信
    - C. 为了协商MSS（最大报文段长度）
    - D. 为了防止已失效的连接请求报文段突然又传送到服务器

11. 在CIDR中，若某网络的地址块为128.14.32.0/20，则该地址块包含的主机地址数量为（）
    - A. 2048
    - B. 4094
    - C. 4096
    - D. 8192

12. 关于UDP和TCP，以下说法正确的是（）
    - A. UDP提供可靠的数据传输服务
    - B. TCP支持一对多通信
    - C. UDP首部开销比TCP小
    - D. TCP不支持全双工通信

13. 在以太网交换机的自学习过程中，如果收到的帧的源地址不在交换表中，交换机应该（）
    - A. 丢弃该帧
    - B. 将该帧转发到所有端口
    - C. 将源地址和对应端口添加到交换表中
    - D. 向源主机请求MAC地址

14. 在BGP协议中，自治系统之间交换路由信息主要考虑的是（）
    - A. 路径最短
    - B. 时延最小
    - C. 策略和管理因素
    - D. 带宽最大

15. 某主机发送一个大小为1MB的文件，链路带宽为10Mb/s，往返时延RTT为100ms，忽略其他时延，采用停等协议时，信道利用率约为（）
    - A. 1%
    - B. 10%
    - C. 50%
    - D. 99%

---

## 二、问答题（每题8分，共40分）

### 1. 简述TCP拥塞控制的四个阶段及其工作原理（慢开始、拥塞避免、快重传、快恢复）。

**答题要点：**
- 慢开始：cwnd从1开始指数增长，直到达到ssthresh
- 拥塞避免：cwnd超过ssthresh后，线性增长
- 快重传：收到3个冗余ACK后立即重传
- 快恢复：设置ssthresh为cwnd的一半，cwnd设置为ssthresh，进入拥塞避免

### 2. 比较电路交换和分组交换的优缺点，并说明在什么情况下电路交换的时延更小。

**答题要点：**
- 电路交换：建立连接时间长，独占带宽，时延小，实时性好
- 分组交换：无需建立连接，统计复用，灵活性好，但存在排队时延
- 时延比较：数据量大、通信时间长时，电路交换时延更小

### 3. 解释CSMA/CD协议的工作原理，并说明为什么以太网帧需要有最小帧长限制。

**答题要点：**
- 先听后发、边听边发、冲突停发、随机重发
- 争用期为2τ（往返传播时延）
- 最小帧长 = 2τ × 数据传输速率
- 目的是保证在发送过程中能够检测到冲突

### 4. 描述距离-向量路由算法和链路状态路由算法的主要区别，并分别举出使用这两种算法的路由协议。

**答题要点：**
- 距离-向量：与相邻路由器交换路由表，迭代计算，存在慢收敛问题（RIP）
- 链路状态：向所有路由器广播链路状态，使用Dijkstra算法，收敛快（OSPF）
- RIP使用距离-向量算法，OSPF使用链路状态算法

### 5. 解释NAT（网络地址转换）的工作原理及其优缺点。

**答题要点：**
- 工作原理：将私有IP地址转换为公有IP地址
- 优点：节省IP地址、隐藏内部网络结构、提高安全性
- 缺点：增加时延、违背端到端原则、使某些应用无法正常工作

---

## 三、综合题（共30分）

### 1. 时延与带宽效率计算（10分）

某网络环境如下：
- 主机A和主机B之间的距离为5000km
- 链路带宽为1Gbps
- 信号在链路上的传播速度为2×10^8 m/s
- 数据帧长度为1250字节，确认帧长度忽略不计

**(1) 计算发送时延和传播时延。（3分）**

**(2) 若采用停等协议，计算信道利用率。（3分）**

**(3) 若采用滑动窗口协议，要使信道利用率达到100%，发送窗口至少应为多少帧？（4分）**

**解答：**

(1) 
- 发送时延 = 帧长度 / 带宽 = (1250×8) / (10^9) = 10μs
- 传播时延 = 距离 / 传播速度 = 5×10^6 / (2×10^8) = 25ms = 25000μs

(2) 
- 停等协议下，发送一帧的总时间 = 发送时延 + 传播时延 + 传播时延（返回）
- 总时间 = 10μs + 25000μs + 25000μs = 50010μs
- 信道利用率 = 发送时延 / 总时间 = 10 / 50010 ≈ 0.02% = 0.0002

(3) 
- 往返时间RTT = 2 × 传播时延 = 50000μs
- 在RTT时间内可以发送的帧数 = RTT / 发送时延 = 50000 / 10 = 5000帧
- 为使信道利用率达到100%，发送窗口至少应为5001帧（考虑到第一帧的确认返回时已经发送了5000帧）

---

### 2. IP地址与子网划分（10分）

某公司获得IP地址块192.168.100.0/24，需要划分为4个子网，分别给4个部门使用，其中：
- 部门A需要60台主机
- 部门B需要30台主机
- 部门C需要25台主机
- 部门D需要10台主机

**(1) 为每个部门分配合适的子网地址块，要求尽量减少IP地址浪费。（6分）**

**(2) 写出部门A的子网掩码、网络地址、广播地址和可用主机IP地址范围。（4分）**

**解答：**

(1) 
- 部门A需要60台主机，需要至少62个IP（包括网络地址和广播地址），2^6=64，分配/26
  - 部门A: 192.168.100.0/26 (主机地址范围：192.168.100.1 ~ 192.168.100.62)
  
- 部门B需要30台主机，需要至少32个IP，2^5=32，分配/27
  - 部门B: 192.168.100.64/27 (主机地址范围：192.168.100.65 ~ 192.168.100.94)
  
- 部门C需要25台主机，需要至少32个IP，2^5=32，分配/27
  - 部门C: 192.168.100.96/27 (主机地址范围：192.168.100.97 ~ 192.168.100.126)
  
- 部门D需要10台主机，需要至少16个IP，2^4=16，分配/28
  - 部门D: 192.168.100.128/28 (主机地址范围：192.168.100.129 ~ 192.168.100.142)

(2) 部门A：
- 子网掩码：255.255.255.192
- 网络地址：192.168.100.0
- 广播地址：192.168.100.63
- 可用主机IP地址范围：192.168.100.1 ~ 192.168.100.62

---

### 3. 路由表构建与转发（10分）

某路由器R1有4个接口，连接4个网络，路由表如下：

| 目的网络 | 子网掩码 | 下一跳 | 接口 |
|---------|---------|--------|------|
| 128.96.39.0 | 255.255.255.128 | 直接交付 | 0 |
| 128.96.39.128 | 255.255.255.128 | 直接交付 | 1 |
| 128.96.40.0 | 255.255.255.128 | R2 | 2 |
| 192.4.153.0 | 255.255.255.192 | R3 | 3 |
| 0.0.0.0 | 0.0.0.0 | R4 | 2 |

**(1) 路由器R1收到目的地址为128.96.39.10的数据报，应从哪个接口转发？（2分）**

**(2) 路由器R1收到目的地址为128.96.40.12的数据报，下一跳路由器是谁？从哪个接口转发？（2分）**

**(3) 路由器R1收到目的地址为192.4.153.65的数据报，应如何处理？（2分）**

**(4) 路由器R1收到目的地址为211.100.20.5的数据报，应如何处理？说明原因。（2分）**

**(5) 如果使用路由聚合，能否将128.96.39.0/25和128.96.39.128/25聚合为一个路由条目？如果可以，写出聚合后的网络地址和子网掩码。（2分）**

**解答：**

(1) 
- 128.96.39.10 & 255.255.255.128 = 128.96.39.0
- 匹配第一条路由，从接口0直接交付

(2) 
- 128.96.40.12 & 255.255.255.128 = 128.96.40.0
- 匹配第三条路由，下一跳是R2，从接口2转发

(3) 
- 192.4.153.65 & 255.255.255.192 = 192.4.153.64，不匹配第四条
- 检查所有路由表项都不匹配
- 使用默认路由（第五条），下一跳是R4，从接口2转发

(4) 
- 211.100.20.5与所有具体路由都不匹配
- 使用默认路由（0.0.0.0/0），下一跳是R4，从接口2转发
- 原因：当没有更具体的匹配时，使用默认路由

(5) 
- 可以聚合
- 128.96.39.0/25和128.96.39.128/25的前24位相同
- 聚合后的网络地址：128.96.39.0
- 子网掩码：255.255.255.0 (/24)

---

**试卷说明：**
1. 本试卷重点考查网络层、传输层、数据链路层的核心知识点
2. 综合题注重实际应用能力，包括时延计算、IP地址规划、路由转发等
3. 开卷考试允许携带教材和笔记，但不允许使用电子设备
4. 答题时请注意计算过程的完整性和逻辑性

**考试时间：120分钟**

**祝考试顺利！**
