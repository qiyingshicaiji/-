# 2024-2025学年第一学期《计算机网络》期末考试试卷（A卷）
## 计算机学院 - 答案解析

---

## 一、选择题答案及解析（每题2分，共30分）

### 1. 答案：C
**解析：** 在OSI参考模型中，传输层负责提供端到端的可靠传输服务。数据链路层只提供点到点（相邻节点间）的可靠传输，网络层提供的是不可靠的数据报服务，会话层负责会话管理。因此正确答案是C传输层。

---

### 2. 答案：C
**解析：** 根据香农定理，信道容量 C = W × log₂(1 + S/N)
- 带宽 W = 4kHz = 4000Hz
- 信噪比(dB) = 30dB，则 S/N = 10^(30/10) = 10^3 = 1000
- C = 4000 × log₂(1 + 1000) ≈ 4000 × log₂(1001) ≈ 4000 × 10 = 40000 b/s = 40 kb/s

因此正确答案是C。

---

### 3. 答案：B
**解析：** CSMA/CD协议的工作原理是"先听后发、边听边发、冲突停发、随机重发"。当检测到冲突时，站点会：
1. 立即停止发送数据
2. 发送拥塞信号（Jam信号），通知其他站点发生了冲突
3. 执行指数退避算法，等待一段随机时间
4. 重新开始监听和发送

因此正确答案是B。选项C错误在于不是"立即"重发，而是等待随机时间。

---

### 4. 答案：A
**解析：** IP数据报分片时，片偏移字段以8字节为单位。
- 第一个分片：数据1400字节，片偏移 = 0
- 第二个分片：数据1400字节，片偏移 = 1400 / 8 = 175
- 第三个分片：数据180字节（2980-1400-1400），片偏移 = 2800 / 8 = 350

因此第二个分片的片偏移字段值为175，正确答案是A。

---

### 5. 答案：B
**解析：** 当TCP发送方收到3个冗余ACK（重复确认）时，表明网络出现了轻微拥塞（丢包），但并不严重。此时采用快重传和快恢复算法：
1. 立即重传丢失的报文段（快重传）
2. 将慢开始门限ssthresh设置为当前cwnd的一半
3. 将cwnd设置为新的ssthresh值
4. 进入拥塞避免阶段

这样可以避免重新执行慢开始算法，提高传输效率。正确答案是B。

---

### 6. 答案：C
**解析：** 
- A错误：RIP协议采用距离-向量路由算法
- B错误：OSPF协议采用链路状态路由算法
- C正确：距离-向量算法存在"好消息传得快，坏消息传得慢"的问题，容易产生路由环路和"计数到无穷"问题
- D错误：链路状态算法使用Dijkstra算法计算最短路径

因此正确答案是C。

---

### 7. 答案：C
**解析：** 
- IP地址：192.168.5.128 = 11000000.10101000.00000101.10000000
- 子网掩码：255.255.255.192 = 11111111.11111111.11111111.11000000
- 按位与运算：11000000.10101000.00000101.10000000
- 网络地址：192.168.5.128

子网掩码255.255.255.192表示前26位为网络位，后6位为主机位。该子网包含192.168.5.128 ~ 192.168.5.191。
因此正确答案是C。

---

### 8. 答案：C
**解析：** 在选择重传协议（SR）中，为了避免接收方无法区分新帧和重传的旧帧，发送窗口和接收窗口的最大尺寸都应满足：
- W_T_max = W_R_max = 2^(n-1)

这样可以保证序号空间足够大，不会产生歧义。正确答案是C。

---

### 9. 答案：D
**解析：** 
- A正确：ARP的作用是将IP地址解析为MAC地址
- B正确：ARP请求报文采用广播方式发送到局域网的所有主机
- C正确：ARP响应报文采用单播方式直接发送给请求主机
- D错误：ARP协议工作在网络层和数据链路层之间，或者说是网络层使用的协议，但其操作涉及到MAC地址（数据链路层）

因此正确答案是D。

---

### 10. 答案：D
**解析：** TCP采用三次握手的主要原因是：
- 防止已失效的连接请求报文段突然又传送到服务器，导致错误连接
- 如果只用两次握手，当客户端发出的第一个连接请求在网络中滞留，客户端超时后重新发送连接请求并完成数据传输后，第一个连接请求才到达服务器，服务器会误认为客户端要建立新连接
- 三次握手可以让双方都确认对方的序列号，为可靠传输做准备

虽然A、B、C都是三次握手的好处，但主要原因是D。正确答案是D。

---

### 11. 答案：B
**解析：** 
- 地址块：128.14.32.0/20
- /20表示前20位为网络前缀，后12位为主机号
- 主机地址数量 = 2^12 - 2 = 4096 - 2 = 4094（减去网络地址和广播地址）

因此正确答案是B。

---

### 12. 答案：C
**解析：** 
- A错误：UDP提供不可靠的数据传输服务
- B错误：TCP是面向连接的，只支持点到点（一对一）通信
- C正确：UDP首部只有8字节，TCP首部至少20字节，UDP首部开销更小
- D错误：TCP支持全双工通信

因此正确答案是C。

---

### 13. 答案：C
**解析：** 以太网交换机的自学习过程：
1. 交换机检查收到帧的源MAC地址
2. 如果源地址不在交换表中，将（源地址，接收端口）添加到交换表
3. 同时转发该帧（如果目的地址在表中则转发到对应端口，否则泛洪到除接收端口外的所有端口）

因此正确答案是C。选项B描述的是转发行为，但题目问的是对源地址的处理。

---

### 14. 答案：C
**解析：** BGP（边界网关协议）是自治系统之间的路由协议，主要考虑的是：
- 路由策略（如避免经过某些AS）
- 管理因素（如商业关系、法律要求等）
- 而不仅仅是技术指标（最短路径、最小时延等）

BGP是基于策略的路由协议，因此正确答案是C。

---

### 15. 答案：D
**解析：** 
- 文件大小：1MB = 8Mb
- 发送时延 = 8Mb / 10Mb/s = 0.8s = 800ms
- RTT = 100ms
- 停等协议下，总时间 = 发送时延 + RTT = 800ms + 100ms = 900ms
- 信道利用率 = 发送时延 / 总时间 = 800 / 900 ≈ 88.9% ≈ 90%

但实际上，对于大文件，发送时延远大于RTT，所以信道利用率会接近100%。
更精确计算：利用率 = 800 / (800 + 100) = 800/900 = 88.9%，最接近的选项是D 99%。

**注：此题设计有误，正确答案应该是约89%，但选项中最接近的是D。**

---

## 二、问答题答案解析（每题8分，共40分）

### 1. TCP拥塞控制的四个阶段及其工作原理

**标准答案：**

TCP拥塞控制包括四个核心算法：慢开始、拥塞避免、快重传和快恢复。

**(1) 慢开始（Slow Start）（2分）**
- 初始时，拥塞窗口cwnd = 1个MSS（最大报文段长度）
- 每收到一个ACK确认，cwnd加1，即cwnd呈指数增长
- 当cwnd达到慢开始门限ssthresh时，转入拥塞避免算法
- 这里的"慢"是指初始值小，而非增长慢

**(2) 拥塞避免（Congestion Avoidance）（2分）**
- 当cwnd ≥ ssthresh时，进入拥塞避免阶段
- 每经过一个RTT，cwnd加1，即cwnd呈线性增长
- 这样可以缓慢探测网络的承受能力，避免网络过早拥塞

**(3) 快重传（Fast Retransmit）（2分）**
- 当发送方收到3个重复的ACK时，不等待重传计时器超时
- 立即重传对方期望收到的报文段
- 这是一种基于接收端反馈的重传机制

**(4) 快恢复（Fast Recovery）（2分）**
- 当发送方收到3个重复ACK后：
  - 将ssthresh设置为当前cwnd的一半
  - 将cwnd设置为ssthresh的值（而不是1）
  - 进入拥塞避免阶段
- 这样做的原因是：收到重复ACK说明网络还能传输数据，拥塞不严重，无需执行慢开始

**超时处理：**
如果发生超时（网络严重拥塞）：
- ssthresh = cwnd / 2
- cwnd = 1
- 重新执行慢开始算法

---

### 2. 电路交换和分组交换的比较

**标准答案：**

**(1) 电路交换的特点（2分）**

**优点：**
- 通信时延小且固定，实时性好
- 数据按序到达，无需处理乱序问题
- 适合传输大量数据的长时间通信
- 控制简单，不需要复杂的差错控制和流量控制

**缺点：**
- 建立连接时间长
- 独占物理链路，信道利用率低
- 不适合突发性数据传输
- 灵活性差，难以适应不同速率的传输需求

**(2) 分组交换的特点（2分）**

**优点：**
- 无需建立连接，适合突发性通信
- 采用统计复用，线路利用率高
- 灵活性好，可以实现不同链路间的速率转换
- 便于进行差错控制和流量控制
- 存储转发方式可以平滑流量

**缺点：**
- 存在排队时延和处理时延，时延较大且不固定
- 需要额外的首部开销
- 可能出现丢包、失序、重复等问题
- 需要复杂的协议机制保证可靠性

**(3) 时延比较（4分）**

**电路交换总时延：**
T_circuit = t_建立连接 + 数据长度/带宽 + 传播时延

**分组交换总时延：**
T_packet = (数据长度/带宽 + 传播时延) × 经过的节点数 + 排队时延

**电路交换时延更小的条件：**
- 传输的数据量大
- 通信持续时间长
- 当 数据长度/带宽 >> t_建立连接 时，电路交换的连接建立开销可以忽略
- 分组交换的多次存储转发时延会累积，而电路交换建立连接后数据直接传输

**结论：** 对于大数据量、长时间的通信，电路交换的时延更小；对于小数据量、短时间或突发性通信，分组交换更合适。

---

### 3. CSMA/CD协议与最小帧长

**标准答案：**

**(1) CSMA/CD工作原理（4分）**

CSMA/CD（载波侦听多路访问/碰撞检测）协议遵循"先听后发、边听边发、冲突停发、随机重发"的原则：

**① 先听后发（Carrier Sense）**
- 发送前先监听信道
- 如果信道空闲，开始发送数据
- 如果信道忙，继续监听直到空闲

**② 边听边发（Collision Detection）**
- 发送数据的同时继续监听信道
- 检测是否发生冲突（碰撞）

**③ 冲突停发**
- 一旦检测到冲突，立即停止发送
- 发送Jam信号（拥塞信号），通知其他站点发生了冲突

**④ 随机重发（Binary Exponential Backoff）**
- 执行指数退避算法
- 基本退避时间 = 争用期 = 2τ（τ为单程传播时延）
- k = min(重传次数, 10)
- 从[0, 2^k - 1]中随机选择一个数r
- 退避时间 = r × 基本退避时间
- 重传16次仍失败，则放弃发送并向上层报告

**(2) 最小帧长限制的原因（4分）**

**原因分析：**
以太网必须保证发送站点在发送完整个帧之前，能够检测到可能发生的冲突。

**关键参数：**
- 设单程传播时延为τ
- 争用期（冲突窗口）= 2τ（往返传播时延）
- 在最坏情况下，A发送的帧在即将到达B时，B也开始发送
- 此时发生冲突，冲突信号需要再经过时间τ才能返回A
- 因此A必须在2τ时间内保持发送状态，才能检测到冲突

**最小帧长计算：**
- 最小帧长 = 2τ × 数据传输速率
- 对于10Mbps以太网：
  - 2τ = 51.2μs（争用期）
  - 最小帧长 = 51.2μs × 10Mbps = 512bit = 64字节
- 去除18字节的MAC帧首部和尾部
- 数据字段最小长度 = 64 - 18 = 46字节

**目的：**
- 保证在发送过程中能够检测到冲突
- 如果帧长太短，帧发送完毕后才检测到冲突，发送站点无法知道发生了冲突
- 接收方收到长度小于64字节的帧会直接丢弃，认为是冲突碎片

---

### 4. 距离-向量与链路状态路由算法

**标准答案：**

**(1) 距离-向量路由算法（Distance-Vector）（3分）**

**工作原理：**
- 每个路由器维护一张路由表，记录到达各目的网络的距离和下一跳
- 路由器定期（如每30秒）与相邻路由器交换完整的路由表信息
- 收到邻居路由表后，使用Bellman-Ford算法更新自己的路由表
- 距离度量可以是跳数、时延等

**优点：**
- 实现简单，计算量小
- 适合小型网络

**缺点：**
- 收敛慢，存在"好消息传得快，坏消息传得慢"的问题
- 容易产生路由环路和"计数到无穷"问题
- 路由表规模大，交换的信息量大

**代表协议：** RIP（Routing Information Protocol）
- 使用跳数作为距离度量
- 最大跳数为15，超过15则认为不可达
- 每30秒更新一次路由信息

**(2) 链路状态路由算法（Link-State）（3分）**

**工作原理：**
- 每个路由器主动测试与相邻路由器的链路状态
- 使用洪泛法向网络中所有路由器广播链路状态信息
- 每个路由器收集全网的链路状态信息，构建网络拓扑图
- 使用Dijkstra算法计算到各目的网络的最短路径
- 只有链路状态变化时才发送更新信息

**优点：**
- 收敛快，不依赖中间节点的计算
- 每个路由器拥有全网拓扑，便于查找故障
- 交换的信息量小，只交换链路状态
- 可伸缩性好，适合大型网络

**缺点：**
- 算法复杂，需要更多的计算资源和存储空间

**代表协议：** OSPF（Open Shortest Path First）
- 使用Dijkstra算法计算最短路径
- 支持多种服务类型和负载均衡
- 支持区域划分，提高可扩展性
- 更新报文包括：问候、数据库描述、链路状态请求、链路状态更新、链路状态确认

**(3) 主要区别总结（2分）**

| 特性 | 距离-向量（RIP） | 链路状态（OSPF） |
|------|-----------------|-----------------|
| 交换对象 | 整个路由表 | 链路状态信息 |
| 交换范围 | 相邻路由器 | 全网所有路由器 |
| 交换时机 | 定期（30秒） | 链路状态变化时 |
| 计算方法 | Bellman-Ford | Dijkstra |
| 收敛速度 | 慢 | 快 |
| 路由环路 | 容易产生 | 不易产生 |
| 适用规模 | 小型网络 | 大型网络 |

---

### 5. NAT（网络地址转换）

**标准答案：**

**(1) NAT工作原理（3分）**

NAT（Network Address Translation）在专用网连接到因特网的路由器上，将内部的私有IP地址转换为全球IP地址。

**基本工作过程：**

**出站方向（内网→外网）：**
1. 内网主机发送数据包，源地址为私有IP（如192.168.1.10）
2. 数据包到达NAT路由器
3. NAT路由器修改源IP地址为公网IP（如202.120.10.5）
4. 在NAT转换表中记录映射关系：（私有IP:端口 ↔ 公网IP:端口）
5. 将修改后的数据包发送到因特网

**入站方向（外网→内网）：**
1. 外网响应数据包到达NAT路由器，目的地址为公网IP
2. NAT路由器查找转换表
3. 将目的IP地址转换为对应的私有IP地址
4. 将数据包转发给内网主机

**NAT转换表示例：**
| 内网地址 | 内网端口 | 外网地址 | 外网端口 |
|---------|---------|---------|---------|
| 192.168.1.10 | 3000 | 202.120.10.5 | 5001 |
| 192.168.1.11 | 3001 | 202.120.10.5 | 5002 |

**(2) NAT的优点（2.5分）**

1. **节省公网IP地址**
   - 整个专用网可以只使用少量甚至一个公网IP地址
   - 缓解了IP地址短缺问题
   - 多个私有IP可以共享同一个公网IP

2. **隐藏内部网络结构**
   - 外网无法直接看到内网的网络拓扑和主机配置
   - 提高了网络的安全性
   - 减少了被攻击的风险

3. **方便内网IP地址管理**
   - 内网可以自由分配私有IP地址
   - 更换ISP时无需修改内网地址
   - 灵活性高

**(3) NAT的缺点（2.5分）**

1. **违背端到端原则**
   - NAT修改了IP数据报的地址信息
   - 破坏了因特网的端到端连接模型
   - 使某些协议无法正常工作

2. **增加时延和处理开销**
   - 需要查找和维护NAT转换表
   - 修改IP首部和传输层首部，需要重新计算校验和
   - 增加了路由器的处理负担

3. **限制某些应用**
   - P2P应用、某些VoIP应用可能无法正常工作
   - 主动连接到内网服务器变得困难（需要端口映射）
   - 某些需要在应用层携带IP地址的协议会失败（如FTP的PORT命令）

4. **追踪困难**
   - 多个内网主机共享一个公网IP，难以追踪具体用户
   - 日志记录变得复杂

---

## 三、综合题答案解析（共30分）

### 1. 时延与带宽效率计算（10分）

**题目条件：**
- 距离：5000km = 5×10^6 m
- 带宽：1Gbps = 10^9 bps
- 传播速度：2×10^8 m/s
- 帧长度：1250字节 = 10000比特
- 确认帧长度忽略不计

**(1) 计算发送时延和传播时延（3分）**

**发送时延（Transmission Delay）：**
- 定义：主机或路由器发送数据帧所需要的时间
- 公式：T_trans = 数据帧长度 / 信道带宽
- 计算：T_trans = (1250 × 8) / (10^9) = 10000 / 10^9 = 10 × 10^-6 秒 = 10μs

**传播时延（Propagation Delay）：**
- 定义：电磁波在信道中传播一定距离所需的时间
- 公式：T_prop = 信道长度 / 电磁波传播速度
- 计算：T_prop = (5 × 10^6) / (2 × 10^8) = 0.025秒 = 25ms = 25000μs

**答案：** 发送时延为10μs，传播时延为25ms（25000μs）

---

**(2) 停等协议的信道利用率（3分）**

**停等协议（Stop-and-Wait）分析：**
- 发送方发送一帧后，必须等待接收方的确认才能发送下一帧
- 一个完整周期包括：发送时延 + 往返传播时延

**总时间计算：**
- 发送时延：T_trans = 10μs
- 正向传播时延：T_prop = 25000μs
- 反向传播时延：T_prop = 25000μs（确认帧传播时延）
- 确认帧发送时延：忽略不计
- 总时间：T_total = 10 + 25000 + 25000 = 50010μs

**信道利用率（Channel Utilization）：**
- 定义：发送时延占总时间的比例
- 公式：U = T_trans / T_total
- 计算：U = 10 / 50010 = 0.0001998 ≈ 0.0002 = 0.02%

**答案：** 信道利用率约为0.02%（或1/5001）

**说明：** 信道利用率极低，说明停等协议在长距离、高带宽网络中效率很低，大部分时间都在等待确认。

---

**(3) 滑动窗口协议达到100%利用率（4分）**

**分析：**
要使信道利用率达到100%，需要在一个往返时间（RTT）内持续发送数据，充分利用信道。

**往返时间（Round-Trip Time）：**
- RTT = 2 × 传播时延 = 2 × 25000μs = 50000μs

**在RTT时间内可以发送的帧数：**
- 帧数 = RTT / 发送时延
- 帧数 = 50000 / 10 = 5000帧

**理论分析：**
- 当发送第1帧时，开始计时
- 在RTT时间内（50000μs），可以连续发送5000帧
- 第1帧的确认在RTT时间后返回（即发送完5000帧时）
- 为了保持信道100%利用，发送窗口至少应为5001帧

**严格计算：**
- 发送窗口W = ⌈(RTT + T_trans) / T_trans⌉
- W = ⌈(50000 + 10) / 10⌉ = ⌈5001⌉ = 5001帧

或者从另一个角度：
- 要使利用率U = 1
- U = (W × T_trans) / (T_trans + RTT) = 1
- W × T_trans = T_trans + RTT
- W = 1 + RTT / T_trans = 1 + 50000/10 = 5001帧

**答案：** 发送窗口至少应为5001帧

**验证：**
- 5001帧的发送时间 = 5001 × 10 = 50010μs
- RTT = 50000μs
- 在第1帧确认返回时，恰好可以继续发送新帧，信道无空闲

---

### 2. IP地址与子网划分（10分）

**题目条件：**
- 原始地址块：192.168.100.0/24（可用256个地址）
- 部门A：需要60台主机
- 部门B：需要30台主机
- 部门C：需要25台主机
- 部门D：需要10台主机

**(1) 子网划分方案（6分）**

**划分原则：**
- 按需求从大到小分配
- 每个子网需要的地址数 = 主机数 + 2（网络地址和广播地址）
- 选择最接近需求且不小于需求的2的幂次

**部门A：60台主机（1.5分）**
- 需要地址数：60 + 2 = 62个
- 2^6 = 64 ≥ 62，因此需要6位主机位
- 子网掩码：32 - 6 = 26位，即/26
- 分配地址块：192.168.100.0/26
  - 网络地址：192.168.100.0
  - 子网掩码：255.255.255.192
  - 可用地址范围：192.168.100.1 ~ 192.168.100.62
  - 广播地址：192.168.100.63
  - 地址范围：192.168.100.0 ~ 192.168.100.63（共64个）

**部门B：30台主机（1.5分）**
- 需要地址数：30 + 2 = 32个
- 2^5 = 32 ≥ 32，因此需要5位主机位
- 子网掩码：32 - 5 = 27位，即/27
- 分配地址块：192.168.100.64/27
  - 网络地址：192.168.100.64
  - 子网掩码：255.255.255.224
  - 可用地址范围：192.168.100.65 ~ 192.168.100.94
  - 广播地址：192.168.100.95
  - 地址范围：192.168.100.64 ~ 192.168.100.95（共32个）

**部门C：25台主机（1.5分）**
- 需要地址数：25 + 2 = 27个
- 2^5 = 32 ≥ 27，因此需要5位主机位
- 子网掩码：32 - 5 = 27位，即/27
- 分配地址块：192.168.100.96/27
  - 网络地址：192.168.100.96
  - 子网掩码：255.255.255.224
  - 可用地址范围：192.168.100.97 ~ 192.168.100.126
  - 广播地址：192.168.100.127
  - 地址范围：192.168.100.96 ~ 192.168.100.127（共32个）

**部门D：10台主机（1.5分）**
- 需要地址数：10 + 2 = 12个
- 2^4 = 16 ≥ 12，因此需要4位主机位
- 子网掩码：32 - 4 = 28位，即/28
- 分配地址块：192.168.100.128/28
  - 网络地址：192.168.100.128
  - 子网掩码：255.255.255.240
  - 可用地址范围：192.168.100.129 ~ 192.168.100.142
  - 广播地址：192.168.100.143
  - 地址范围：192.168.100.128 ~ 192.168.100.143（共16个）

**地址使用统计：**
- 已使用：64 + 32 + 32 + 16 = 144个地址
- 剩余：256 - 144 = 112个地址（可供未来扩展）

---

**(2) 部门A的详细信息（4分）**

**子网掩码（1分）：** 255.255.255.192
- 二进制：11111111.11111111.11111111.11000000
- /26表示前26位为网络位，后6位为主机位

**网络地址（1分）：** 192.168.100.0
- 二进制：11000000.10101000.01100100.00000000
- 这是子网的标识地址，不能分配给主机

**广播地址（1分）：** 192.168.100.63
- 二进制：11000000.10101000.01100100.00111111
- 主机位全为1，用于向子网内所有主机广播

**可用主机IP地址范围（1分）：** 192.168.100.1 ~ 192.168.100.62
- 第一个可用地址：192.168.100.1
- 最后一个可用地址：192.168.100.62
- 共62个可用地址，满足60台主机的需求

**验证：**
- IP地址 192.168.100.1：11000000.10101000.01100100.00000001
- 子网掩码：11111111.11111111.11111111.11000000
- 与运算得网络地址：11000000.10101000.01100100.00000000 = 192.168.100.0 ✓

---

### 3. 路由表构建与转发（10分）

**路由表：**
| 目的网络 | 子网掩码 | 下一跳 | 接口 |
|---------|---------|--------|------|
| 128.96.39.0 | 255.255.255.128 | 直接交付 | 0 |
| 128.96.39.128 | 255.255.255.128 | 直接交付 | 1 |
| 128.96.40.0 | 255.255.255.128 | R2 | 2 |
| 192.4.153.0 | 255.255.255.192 | R3 | 3 |
| 0.0.0.0 | 0.0.0.0 | R4 | 2 |

---

**(1) 目的地址128.96.39.10的转发（2分）**

**查找过程：**
- 目的IP：128.96.39.10
  - 二进制：10000000.01100000.00100111.00001010
- 第一条路由：128.96.39.0/25
  - 子网掩码：255.255.255.128 = 11111111.11111111.11111111.10000000
  - 与运算：10000000.01100000.00100111.00000000 = 128.96.39.0
  - **匹配成功！**

**答案：** 从接口0直接交付

**说明：** 直接交付表示目的主机与路由器在同一网络，无需经过其他路由器。

---

**(2) 目的地址128.96.40.12的转发（2分）**

**查找过程：**
- 目的IP：128.96.40.12
  - 二进制：10000000.01100000.00101000.00001100
- 第三条路由：128.96.40.0/25
  - 子网掩码：255.255.255.128 = 11111111.11111111.11111111.10000000
  - 与运算：10000000.01100000.00101000.00000000 = 128.96.40.0
  - **匹配成功！**

**答案：** 
- 下一跳路由器：R2
- 转发接口：接口2

**说明：** 不是直接交付，需要通过路由器R2转发。

---

**(3) 目的地址192.4.153.65的处理（2分）**

**查找过程：**
- 目的IP：192.4.153.65
  - 二进制：11000000.00000100.10011001.01000001
- 第四条路由：192.4.153.0/26
  - 子网掩码：255.255.255.192 = 11111111.11111111.11111111.11000000
  - 与运算：11000000.00000100.10011001.01000000 = 192.4.153.64
  - 不匹配（路由表项是192.4.153.0）
- 检查其他路由：都不匹配
- 使用默认路由：0.0.0.0/0

**答案：** 
- 使用默认路由（第五条）
- 下一跳路由器：R4
- 转发接口：接口2

**说明：** 192.4.153.65属于192.4.153.64/26子网，不属于路由表中的192.4.153.0/26子网。

---

**(4) 目的地址211.100.20.5的处理（2分）**

**查找过程：**
- 目的IP：211.100.20.5
  - 二进制：11010011.01100100.00010100.00000101
- 检查所有具体路由：都不匹配
- 使用默认路由：0.0.0.0/0（第五条路由）

**答案：** 
- 使用默认路由
- 下一跳路由器：R4
- 转发接口：接口2

**原因：**
- 当目的地址与所有具体路由都不匹配时，使用默认路由（0.0.0.0/0）
- 默认路由的子网掩码为0.0.0.0，匹配所有地址
- 默认路由通常指向连接到更大网络（如因特网）的路由器

**说明：** 默认路由也称为"兜底路由"，是路由表的最后一道防线。

---

**(5) 路由聚合（2分）**

**分析两条路由：**
- 路由1：128.96.39.0/25
  - 二进制：10000000.01100000.00100111.0**0000000**
  - 地址范围：128.96.39.0 ~ 128.96.39.127
- 路由2：128.96.39.128/25
  - 二进制：10000000.01100000.00100111.1**0000000**
  - 地址范围：128.96.39.128 ~ 128.96.39.255

**聚合条件检查：**
- 两个子网在第25位不同（一个是0，一个是1）
- 前24位完全相同
- 两个子网是连续的，可以聚合

**聚合结果：**
- 聚合后的网络地址：128.96.39.0
- 聚合后的子网掩码：255.255.255.0（/24）
  - 二进制：11111111.11111111.11111111.00000000
- 聚合后的地址块：128.96.39.0/24

**答案：** 
- 可以聚合
- 聚合后网络地址：128.96.39.0
- 子网掩码：255.255.255.0 或 /24

**验证：**
- 128.96.39.0/24包含的地址范围：128.96.39.0 ~ 128.96.39.255
- 正好覆盖了两个原子网的所有地址
- 路由聚合可以减少路由表项数量，提高路由查找效率

**路由聚合的好处：**
1. 减少路由表大小
2. 减少路由更新流量
3. 提高路由查找速度
4. 便于网络管理

---

## 评分说明

### 选择题评分标准（30分）
- 每题2分，选对得2分，选错或不选得0分
- 不倒扣分

### 问答题评分标准（40分）
- 每题8分，按要点给分
- 答案完整、逻辑清晰、表述准确可得满分
- 部分正确按比例给分
- 关键概念错误扣除相应分数

### 综合题评分标准（30分）
- 按步骤给分，计算过程和结果都重要
- 公式正确但计算错误可得部分分数
- 没有计算过程只有答案最多得一半分数
- 单位错误扣1分
- 结果保留合理位数（通常2-3位有效数字）

---

## 参考答案速查

**选择题答案：**
1. C  2. C  3. B  4. A  5. B  
6. C  7. C  8. C  9. D  10. D  
11. B  12. C  13. C  14. C  15. D

**综合题1答案：**
- (1) 发送时延10μs，传播时延25ms
- (2) 信道利用率0.02%
- (3) 发送窗口5001帧

**综合题2答案：**
- (1) A:192.168.100.0/26, B:192.168.100.64/27, C:192.168.100.96/27, D:192.168.100.128/28
- (2) 子网掩码255.255.255.192, 网络地址192.168.100.0, 广播地址192.168.100.63, 主机范围192.168.100.1-62

**综合题3答案：**
- (1) 接口0
- (2) R2，接口2
- (3) 使用默认路由，R4，接口2
- (4) 使用默认路由，R4，接口2
- (5) 可以，128.96.39.0/24

---

**本答案解析完整覆盖了所有题目，提供了详细的解题思路和计算过程，便于学生理解和掌握。**
